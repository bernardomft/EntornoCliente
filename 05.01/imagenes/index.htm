<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>IMAGENES</title>
<style>
	*{
		margin: 0;
		padding: 0;
		box-sizing: border-box;
	}
	#contenedor{
		width: 95%;
		margin: 0 auto;
	}
</style>
<script>
function iniciar(){

	contenedorPrincipal();
	for (var j=1;j<11;j++){
		getFaces(j);
	}
}
function getFaces(page){
	// [notas]
	// parsear el JSON
	// sincrono para encadenar las 10 peticiones, deberia ser asincrono
	// siempre retorna 10 id la APi? bueno

	var xhttp = new XMLHttpRequest(); //  [nota] para asincrono creamos un objeto para cada peticion
	xhttp.onreadystatechange = function() {
		if (this.readyState == 4 && this.status == 200) {
			// todas las peticiones son atendidas por la misma callBack
			//console.log(JSON.parse(this.responseText)); 
			var tmp = JSON.parse(this.responseText);
			
			console.log(this.responseText)
		}
	}
	var url='https://api.generated.photos/api/v1/faces?page='+page+'&api_key=4-RCi2E34SZI5dnBFNX1tQ';
	xhttp.open("GET",url,true); // [nota] true:asincrono , false:sincrono
	xhttp.send(); 
}

function contenedorPrincipal(){
	var ele = document.createElement('div');
	ele.id = 'contenedor';
	document.body.appendChild(ele);
}
window.onload=iniciar;
</script>

<style>
</style>

</head>
 
<body>
	<p><b>Instrucciones</b>: mover el cursor con teclas 4,8,6,2 del bloque numerico. ENTER y ESC para seleccionar. </p>
</body>
</html>
